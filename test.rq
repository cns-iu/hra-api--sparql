PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX ccf: <http://purl.org/ccf/>

CONSTRUCT {
  ?tissueDonor rdf:type ?donorType ;
               ccf:tissue_provider_name ?tmc ;
               rdfs:label ?donorLabel ;
               ccf:description ?donorDescription ;
               ccf:url ?link .
  ?sample ccf:description ?description;
    	  rdfs:label ?label;
        ccf:section_count ?sectionCount;
        ccf:section_size ?sectionSize;
        ccf:section_size_unit ?sectionUnit ;
    	  ccf:url ?link .
  
  ?dataset rdf:type ccf:Dataset ;
           ccf:technology ?technology ;
           ccf:thumbnail ?thumbnail ;
           ccf:description ?datasetDescription ;
           rdfs:label ?datasetLabel ;
    	   ccf:url ?link .
  ?sections ccf:sample_type ?sectionType;
  		  ccf:section_number ?sectionNumber ;
    	  rdfs:label ?sectionLabel ;
    	  ccf:description ?sectionDescription ;
    	  ccf:url ?link .
}
WHERE {
  ?sample ccf:sample_type ?sampleType ; 
    	  ccf:has_registration_location ?rui_location ;
        ccf:generates_dataset ?dataset ;
  		  ccf:comes_from ?tissueDonor ;
        ccf:description ?description;
        ccf:section_count ?sectionCount;
        ccf:section_size ?sectionSize;
        ccf:section_size_unit ?sectionUnit ;
    	 rdfs:label ?label .


  ?tissueDonor rdf:type ?donorType ;
               ccf:tissue_provider_name ?tmc ;
               rdfs:label ?donorLabel;
               rdfs:comment ?donorDescription;
               ccf:url ?link .

  ?dataset ccf:technology ?technology ;
           ccf:thumbnail ?thumbnail ;
           ccf:description ?datasetDescription ;
           rdfs:label ?datasetLabel .

  OPTIONAL {
    ?sections ccf:sample_type "Tissue Section" ;
  		     ccf:section_number ?sectionNumber ;
    	   rdfs:label ?sectionLabel ;
    	   ccf:description ?sectionDescription ;
    	   ccf:url ?link .
  }

  FILTER (?sampleType = "Tissue Block")
  #FILTER (?sectionType = "Tissue Section")
  FILTER (?donorType = ccf:donor)
}
